<script>const burger=document.getElementById("burger"),cross=document.getElementById("cross"),nav=document.querySelector("#site-header nav");function toggleNav(){nav.classList.toggle("open")}function fadeInPage(){if(!window.AnimationEvent)return;let e=document.getElementById("fader");e&&e.classList.add("fade-out")}burger.addEventListener("click",toggleNav),cross.addEventListener("click",toggleNav),document.addEventListener("DOMContentLoaded",function(){let e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(e||!window.AnimationEvent)return;fadeInPage();let t=document.getElementsByTagName("a");for(let n=0;n<t.length;n++)t[n].hostname===window.location.hostname&&t[n].pathname!==window.location.pathname&&t[n].addEventListener("click",function(e){let t=document.getElementById("fader");if(!t)return;let n=e.currentTarget,r=function(){window.location=n.href,t.removeEventListener("animationend",r)};t.addEventListener("animationend",r),e.preventDefault(),t.classList.add("fade-in")})}),window.addEventListener("pageshow",function(e){if(!e.persisted)return;let t=document.getElementById("fader");t&&t.classList.remove("fade-in")}),window.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("post-body");if(!e)return;let t=document.getElementById("toc-container");if(!t)return;let n=new IntersectionObserver(e=>{let n=!1;e.forEach(e=>{let r=e.target.getAttribute("id"),a=t.querySelector(`a[href="#${r}"]`).parentElement;e.intersectionRatio>0&&!n&&(t.querySelectorAll("li.active").forEach(e=>{e.classList.remove("active")}),a.classList.add("active"),n=!0)})});e.querySelectorAll("h2[id]").forEach(e=>{n.observe(e)})});const hrObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("show"):e.target.classList.remove("show")})}),hrElements=document.querySelectorAll("hr");hrElements.forEach(e=>{e.classList.add("hidden"),hrObserver.observe(e)}),window.addEventListener("load",()=>{let e=document.getElementById("h1");e&&e.classList.add("show")});const arrowObserver=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting?(r.target.classList.add("show"),r.target.classList.remove("reset")):(r.target.classList.add("reset"),r.target.classList.remove("show"))})}),arrow=document.getElementById("arrow");arrow&&arrowObserver.observe(arrow);let postsObject={{%for post in site.posts%}"{{ post.url | xml_escape }}":{"title":"{{ post.title | xml_escape }}","description":"{{ post.description | xml_escape }}","author":"{{ post.author | xml_escape }}","category":"{{ post.category | xml_escape }}","content":{{post.content|strip_html|strip_newlines|jsonify}},"url":"{{ post.url | xml_escape }}"}{%if forloop.last==!1%},{%endif%}{%endfor%}};let documents=Object.values(postsObject);let idx=lunr(function(){this.ref('url');this.field('title',{boost:10});this.field('description');this.field('author');this.field('category');this.field('content');this.field('url');documents.forEach((doc)=>{this.add(doc)})});const input=document.querySelector("#search-input");const resultsList=document.querySelector("#search-results");input.addEventListener("input",()=>{const searchValue=input.value;resultsList.textContent="";if(searchValue){resultsList.classList.add("open");const results=idx.search(searchValue);if(results.length){results.forEach(result=>{const post=postsObject[result.ref];const listItem=document.createElement("li");const titleElement=document.createElement("h3");const parElement=document.createElement("p");const link=document.createElement("a");const hrElement=document.createElement("hr");link.href=post.url;link.textContent=post.title;parElement.textContent=post.description;titleElement.appendChild(link);listItem.appendChild(titleElement);listItem.appendChild(parElement);listItem.appendChild(hrElement);resultsList.appendChild(listItem)})}else{const listItem=document.createElement("li");listItem.textContent="No results found";resultsList.appendChild(listItem)}}else{resultsList.classList.remove("open")}})</script>
