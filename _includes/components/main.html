<script>const burger=document.getElementById("burger"),cross=document.getElementById("cross"),nav=document.querySelector("#site-header nav");function toggleNav(){nav.classList.toggle("open")}function fadeInPage(){if(!window.AnimationEvent)return;let e=document.getElementById("fader");e&&e.classList.add("fade-out")}burger.addEventListener("click",toggleNav),cross.addEventListener("click",toggleNav),document.addEventListener("DOMContentLoaded",function(){let e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(e||!window.AnimationEvent)return;fadeInPage();let t=document.getElementsByTagName("a");for(let n=0;n<t.length;n++)t[n].hostname===window.location.hostname&&t[n].pathname!==window.location.pathname&&t[n].addEventListener("click",function(e){let t=document.getElementById("fader");if(!t)return;let n=e.currentTarget,r=function(){window.location=n.href,t.removeEventListener("animationend",r)};t.addEventListener("animationend",r),e.preventDefault(),t.classList.add("fade-in")})}),window.addEventListener("pageshow",function(e){if(!e.persisted)return;let t=document.getElementById("fader");t&&t.classList.remove("fade-in")}),window.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("post-body");if(!e)return;let t=document.getElementById("toc-container");if(!t)return;let n=new IntersectionObserver(e=>{let n=!1;e.forEach(e=>{let r=e.target.getAttribute("id"),a=t.querySelector(`a[href="#${r}"]`).parentElement;e.intersectionRatio>0&&!n&&(t.querySelectorAll("li.active").forEach(e=>{e.classList.remove("active")}),a.classList.add("active"),n=!0)})});e.querySelectorAll("h2[id]").forEach(e=>{n.observe(e)})});const hrObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("show"):e.target.classList.remove("show")})}),hrElements=document.querySelectorAll("hr");hrElements.forEach(e=>{e.classList.add("hidden"),hrObserver.observe(e)}),window.addEventListener("load",()=>{let e=document.getElementById("h1");e&&e.classList.add("show")});const arrowObserver=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting?(r.target.classList.add("show"),r.target.classList.remove("reset")):(r.target.classList.add("reset"),r.target.classList.remove("show"))})}),arrow=document.getElementById("arrow");arrow&&arrowObserver.observe(arrow);fetch("/search.json").then((e=>e.json())).then((e=>{const t=e.posts.reduce(((e,t)=>(e[t.url]=t,e)),{}),n=Object.values(t),l=lunr((function(){this.ref("url"),this.field("title",{boost:10}),this.field("excerpt"),this.field("author"),this.field("category"),this.field("content"),n.forEach((e=>{this.add(e)}))})),c=document.querySelector("#search-input"),o=document.querySelector("#search-results");c.addEventListener("input",(()=>{const e=c.value;if(o.textContent="",e){o.classList.add("open");const n=l.search(e),c=n.length,d=document.createElement("li");d.textContent=`${c} Result(s) found`,d.style.fontWeight="bold",o.appendChild(d),n.length&&n.forEach((e=>{const n=t[e.ref],l=document.createElement("li"),c=document.createElement("h2"),d=document.createElement("p"),s=document.createElement("a"),r=document.createElement("hr");s.href=n.url,s.textContent=n.title,d.textContent=n.excerpt,c.appendChild(s),l.appendChild(c),l.appendChild(d),l.appendChild(r),o.appendChild(l)}))}else o.classList.remove("open")}))}));</script>
